<div id='auction-meta-box' class="container container-fluid">

    <div class="page-header">
        <h1 id="meta-name" class="meta-field">{{auction.title}}</h1>
    </div>
    <div class='row'>
        <div class="col-sm-3">Current Price</div>
        <div class="col-sm-9">{{currentPrice() | commaThousands}}</div>
    </div>
    <div class='row'>
        <div class="col-sm-3">Highest Bidder</div>
        <div class="col-sm-9">{{auction.winningBidder| capitaliseFirstLetter}}</div>
    </div>
    <!-- <div class='row'>
        <div class="col-sm-3">Ending At</div>
        <div class="col-sm-9">{{auction.endTime| formatTime}}</div>
    </div>-->
    <!-- <div class='row'>
        <div class="col-sm-3">Time Left</div>
        <div class="col-sm-9">{{auction.endTime| timeLeft}}</div>
    </div>-->      
    <div class='row'>
        <div class="col-sm-3">Seller</div>
        <div class="col-sm-9">{{auction.creatorName| capitaliseFirstLetter}}</div>
    </div>
    <div class='row'>
        <div class="col-sm-3">Description</div>
        <div class="col-sm-9">{{auction.description}}</div>
    </div>      
    <hr/>
</div>

<div class='row'>
    <div class="col-sm-6">
        <!-- bids -->
        <div class="panel panel-primary">
            <div class="panel-heading">Bids</div>
            <div class="panel-body">
                <form name="helpForm" novalidate role="form" class="form-horizontal">
                    <div class="form-group">
                        <label for="bid-amount" class="col-sm-3 control-label">
                            Place a bid
                        </label>
                        <div class="col-sm-9">
                            <p>
                                <span class="btn-group btn-group-justified" role="group" aria-label="...">
                                    <span class="btn-group" role="group">                                        
                                        <button class="btn btn-default" 
                                                ng-click="placeBid(1000)"
                                                type="button">+1,000</button>
                                    </span>
                                    <span class="btn-group" role="group">
                                        <button class="btn btn-default" 
                                                ng-click="placeBid(5000)"
                                                type="button">+5,000</button>
                                    </span>
                                    <span class="btn-group" role="group">
                                        <button class="btn btn-default" 
                                                ng-click="placeBid(10000)"
                                                type="button">+10,000</button>
                                    </span>
                                </span>
                            </p>
                            <div class="input-group">                                
                                <input id="bid-amount"
                                       type="number"
                                       ng-model="bidamount"
                                       class="form-control" 
                                       placeholder="Minimum increment is 1000" />
                                <span class="input-group-btn">
                                    <button ng-click="placeBid()"
                                            class="btn btn-default" 
                                            type="button">Bid</button>
                                </span>
                            </div><!-- /input-group -->
                            <p>{{errorMsg}}</p>
                        </div>
                    </div>
                </form>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th class="text-center">Bidder</th>
                        <th class="text-center">Amount</th>
                        <th class="text-center">When</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="bid in bids| reverse">
                        <td data-bidderId='{{ bid.bidderId}}'>{{ bid.bidderName| capitaliseFirstLetter}}</td>
                        <td class='text-right'>{{ bid.bidamount | number : 0}}</td>
                        <td class='text-right'>{{ bid.timestamp | formatTimeShort}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- /bids -->
    </div>
    <div class="col-sm-6">
        <!-- comments -->
        <div class="panel panel-primary">
            <div class="panel-heading">Comments</div>
            <ul class="list-group">
                <li class="list-group-item" ng-repeat="comment in comments">
                    <p>{{ comment.text}}</p>
                    <p class="author">posted by
                        <a ng-href="#/users/{{ comment.creatorUID}}">
                            {{ comment.creator}}
                        </a>
                        <a ng-href=""
                           ng-click="deleteComment(comment)"
                           ng-show="signedIn() && comment.creatorUID === user.uid"
                           style="cursor: pointer;">
                            (delete)
                        </a>
                    </p>
                </li>
            </ul>
            <div class="panel-body">
                <div class="cmt-form">
                    <div ng-hide="signedIn()">
                        <p><a href="#/login">Sign in</a> to post a comment</p>
                    </div>
                    <form ng-show="signedIn()" ng-submit="addComment()">
                        <textarea
                            ng-model="commentText"
                            placeholder="Post a Comment"
                            class="form-control"></textarea><br />
                        <input type="submit" value="Post Comment" class="btn btn-primary" />
                    </form>
                </div>
            </div>
        </div>
        <!-- /comments -->
    </div>
</div>